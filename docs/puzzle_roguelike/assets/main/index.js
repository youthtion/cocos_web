System.register("chunks:///_virtual/BuffController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameModel.ts"],(function(t){var e,f,u,i,s,n,r,B,b,a,h,l,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,f=t.inheritsLoose,u=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){s=t.cclegacy,n=t._decorator,r=t.Node,B=t.Label,b=t.CCInteger,a=t.Component},function(t){h=t.GameModel,l=t.MIN_BOARD_LENGTH,_=t.ADD_NEAR_RATE}],execute:function(){var o,L,c,T,E,p,O,g,R,S,C,z,A,U,m,Z,y,P,G,N,d;s._RF.push({},"efd9cZ2vtdGkZunZzVclwQC","BuffController",void 0);var D=n.ccclass,F=n.property,M=function(t){return t[t.BT_GROW_STOP=0]="BT_GROW_STOP",t[t.BT_GROW_DEC=1]="BT_GROW_DEC",t[t.BT_SMALLER_PUZZLE=2]="BT_SMALLER_PUZZLE",t[t.BT_BIGGER_PUZZLE=3]="BT_BIGGER_PUZZLE",t[t.BT_LESS_HUE=4]="BT_LESS_HUE",t[t.BT_MORE_HUE=5]="BT_MORE_HUE",t[t.BT_ADD_OBSTACLE=6]="BT_ADD_OBSTACLE",t[t.BT_DEC_OBSTACLE=7]="BT_DEC_OBSTACLE",t[t.BT_GET_1X1_PUZZLE=8]="BT_GET_1X1_PUZZLE",t[t.BT_CANNOT_ROTATE=9]="BT_CANNOT_ROTATE",t[t.BT_LESS_BUFF=10]="BT_LESS_BUFF",t[t.BT_MORE_BUFF=11]="BT_MORE_BUFF",t[t.BT_MORE_REFRESH=12]="BT_MORE_REFRESH",t}(M||{});t("BuffController",(o=D("BuffController"),L=F({type:r}),c=F({type:B}),T=F({type:r}),E=F({type:r}),p=F({type:r}),O=F({type:B}),g=F({type:B}),R=F({type:B}),S=F({type:b}),o((A=e((z=function(t){function e(){for(var e,f=arguments.length,s=new Array(f),n=0;n<f;n++)s[n]=arguments[n];return e=t.call.apply(t,[this].concat(s))||this,u(e,"refreshBtn",A,i(e)),u(e,"freshLabel",U,i(e)),u(e,"buffBtn1",m,i(e)),u(e,"buffBtn2",Z,i(e)),u(e,"buffBtn3",y,i(e)),u(e,"buffLabel1",P,i(e)),u(e,"buffLabel2",G,i(e)),u(e,"buffLabel3",N,i(e)),u(e,"buffSpace",d,i(e)),e.buffBtns=[],e.buffLabels=[],e.buffList=[],e.buffNum=2,e.refreshNum=0,e.buffText=["下關底板停止成長","底板縮小","方塊容易變小","方塊容易變大","方塊色差減少\n再選1次效果","方塊色差增加","底板缺格增加","底板缺格減少","獲得1x1方塊","下關不可旋轉方塊\n再選1次效果","減少選擇數量\n出現底板縮小效果","增加選擇數量\n再選1次效果","增加刷新次數"],e}f(e,t);var s=e.prototype;return s.start=function(){this.buffBtn1&&this.buffBtns.push(this.buffBtn1),this.buffBtn2&&this.buffBtns.push(this.buffBtn2),this.buffBtn3&&this.buffBtns.push(this.buffBtn3),this.buffLabel1&&this.buffLabels.push(this.buffLabel1),this.buffLabel2&&this.buffLabels.push(this.buffLabel2),this.buffLabel3&&this.buffLabels.push(this.buffLabel3)},s.update=function(t){},s.showBuffBtn=function(){for(var t=0;t<this.buffBtns.length;t++)this.buffNum>t?(this.buffBtns[t].active=!0,this.buffBtns[t].setPosition(this.buffSpace*(this.buffNum-1)*-.5+t*this.buffSpace,0,0),this.buffLabels[t].string=this.buffText[this.buffList[t]]):this.buffBtns[t].active=!1;this.refreshBtn&&(this.refreshBtn.active=this.refreshNum>0,this.freshLabel&&(this.freshLabel.string=""+this.refreshNum))},s.onBuff1Click=function(){this.setBuff(this.buffList[0])},s.onBuff2Click=function(){this.setBuff(this.buffList[1])},s.onBuff3Click=function(){this.setBuff(this.buffList[2])},s.onRefreshClick=function(){this.refreshNum-=1,this.generateBuffList(),this.showBuffBtn()},s.getBuffAddNearRate=function(){for(var t=_.slice(),e=2;e<t.length;e++)t[e]+=.1*h.getPuzzleSizeBuff(),t[e]>1?t[e]=1:t[e]<0&&(t[e]=0);return t},s.setBuff=function(t){switch(t){case M.BT_GROW_STOP:break;case M.BT_GROW_DEC:h.setBoardLength(h.getBoardLength()-1);break;case M.BT_SMALLER_PUZZLE:h.setPuzzleSizeBuff(h.getPuzzleSizeBuff()-1);break;case M.BT_BIGGER_PUZZLE:h.setPuzzleSizeBuff(h.getPuzzleSizeBuff()+1);break;case M.BT_LESS_HUE:return h.setLessHueBuff(h.getLessHueBuff()+1),this.generateBuffList(),void this.showBuffBtn();case M.BT_MORE_HUE:h.setLessHueBuff(h.getLessHueBuff()-1);break;case M.BT_ADD_OBSTACLE:h.setObstacleBuff(h.getObstacleBuff()+1);break;case M.BT_DEC_OBSTACLE:h.setObstacleBuff(h.getObstacleBuff()-1);break;case M.BT_GET_1X1_PUZZLE:h.setOnecellBuff(h.getOnecellBuff()+1);break;case M.BT_CANNOT_ROTATE:return h.setCannotRotateBuff(!0),this.generateBuffList(),void this.showBuffBtn();case M.BT_LESS_BUFF:return this.buffNum-=1,this.generateBuffList(),this.buffList[0]=M.BT_GROW_DEC,void this.showBuffBtn();case M.BT_MORE_BUFF:return this.buffNum+=1,this.generateBuffList(),void this.showBuffBtn();case M.BT_MORE_REFRESH:this.refreshNum+=1}t>M.BT_GROW_DEC&&h.setBoardLength(h.getBoardLength()+1),this.node.emit("onSetBuffFinish")},s.generateBuffList=function(){this.buffList=[],this.buffList.push(M.BT_GROW_STOP),h.getPuzzleSizeBuff()>-3&&this.buffList.push(M.BT_SMALLER_PUZZLE),h.getPuzzleSizeBuff()<3&&this.buffList.push(M.BT_BIGGER_PUZZLE),this.buffList.push(M.BT_LESS_HUE),h.getLessHueBuff()>1&&this.buffList.push(M.BT_MORE_HUE),h.getObstacleBuff()<4&&this.buffList.push(M.BT_ADD_OBSTACLE),h.getObstacleBuff()>0&&this.buffList.push(M.BT_DEC_OBSTACLE),h.getOnecellBuff()<5&&this.buffList.push(M.BT_GET_1X1_PUZZLE),this.buffList.push(M.BT_CANNOT_ROTATE),h.getBoardLength()>l&&this.buffNum>1&&this.buffList.push(M.BT_LESS_BUFF),this.buffNum<3&&this.buffList.push(M.BT_MORE_BUFF),this.buffList.push(M.BT_MORE_REFRESH);for(var t=0;t<this.buffList.length;t++){var e=Math.floor(Math.random()*(this.buffList.length-t))+t,f=[this.buffList[e],this.buffList[t]];this.buffList[t]=f[0],this.buffList[e]=f[1]}},e}(a)).prototype,"refreshBtn",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(z.prototype,"freshLabel",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(z.prototype,"buffBtn1",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(z.prototype,"buffBtn2",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(z.prototype,"buffBtn3",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(z.prototype,"buffLabel1",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(z.prototype,"buffLabel2",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(z.prototype,"buffLabel3",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=e(z.prototype,"buffSpace",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=z))||C));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameModel.ts","./PuzzleController.ts","./BuffController.ts"],(function(t){var e,r,n,l,i,a,o,u,s,f,h,c,g,p,b,z,d,v,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,l=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,o=t.Prefab,u=t.Node,s=t.Label,f=t.instantiate,h=t.Sprite,c=t.Component},function(t){g=t.GameModel,p=t.CELL_WIDTH,b=t.OBSTACLE_COLOR,z=t.BOARD_COLOR,d=t.ADD_NEAR_RATE},function(t){v=t.PuzzleController},function(t){C=t.BuffController}],execute:function(){var m,B,P,y,L,M,S,R,O,w,F,A,_,k,N,D,G;i._RF.push({},"7e675OHFblFTawCzOgyllbA","GameController",void 0);var T=a.ccclass,E=a.property;t("GameController",(m=T("GameController"),B=E({type:o}),P=E({type:v}),y=E({type:C}),L=E({type:u}),M=E({type:u}),S=E({type:s}),R=E({type:s}),m((F=e((w=function(t){function e(){for(var e,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,n(e,"cellPrefab",F,l(e)),n(e,"puzzleCtrl",A,l(e)),n(e,"buffCtrl",_,l(e)),n(e,"startMenu",k,l(e)),n(e,"btnStart",N,l(e)),n(e,"titleLabel",D,l(e)),n(e,"stageLabel",G,l(e)),e}r(e,t);var i=e.prototype;return i.start=function(){var t,e,r;null==(t=this.puzzleCtrl)||t.node.on("onFitPuzzle",this.onFitPuzzle,this),null==(e=this.puzzleCtrl)||e.node.on("onRemovePuzzle",this.onRemovePuzzle,this),null==(r=this.buffCtrl)||r.node.on("onSetBuffFinish",this.onStartButtonClicked,this)},i.restart=function(){var t;this.stageLabel&&(this.stageLabel.string="Stage"+g.getStage()),this.initBoard(),null==(t=this.puzzleCtrl)||t.initPuzzle()},i.update=function(t){},i.initBoard=function(){if(this.cellPrefab){var t=g.getBoardLength(),e=[];this.node.removeAllChildren();var r=new Set;if(g.getObstacleBuff()>0)for(var n=g.getObstacleBuff(),l=Math.floor(t*t/n),i=0;i<n;i++)r.add(Math.floor(Math.random()*l)+l*i);for(var a=0;a<t;a++){for(var o=[],u=0;u<t;u++){var s=f(this.cellPrefab);if(s){this.node.addChild(s),s.setPosition(a*p,u*p,0);var c=s.getComponent(h);r.size>0&&r.has(a*t+u)?(c&&(c.color=b),o.push(1/0)):(c&&(c.color=z),o.push(-1))}}e.push(o)}g.setBoard(e);var d=t*p*-.5+.5*p;this.node.setPosition(d,d,0),this.generatePuzzle(e)}},i.generatePuzzle=function(t){for(var e=[],r=0;r<t.length;r++)for(var n=0;n<t[r].length;n++)if(-1==t[r][n]){var l=e.length;if(e.push([[r,n]]),t[r][n]=l,this.addNearCell(e,t),e[l].length<=1){var i=e[l][0],a=i[0],o=i[1],u=this.findNearPuzzle(t,a,o);e[u].push(e[l][0]),e.pop(),t[a][o]=u}}if(g.getOnecellBuff()>0)for(var s=g.getOnecellBuff(),f=0;f<s;f++)for(var h=0;h<e.length;h++)if(e[h].length>2){e.push([e[h][0]]),e[h].shift();break}g.setPuzzles(e)},i.addNearCell=function(t,e){for(var r=t.length-1,n=t[r],l=e.map((function(t){return t.slice()})),i=[],a=[[1,0],[0,1]],o=0;o<n.length;o++)for(var u=n[o],s=u[0],f=u[1],h=0;h<a.length;h++){var c=a[h],g=s+c[0],p=f+c[1];g<l.length&&p<l[g].length&&-1==l[g][p]&&(i.push([g,p]),l[g][p]=0)}if(i.length>0&&n.length<d.length){var b,z=null==(b=this.buffCtrl)?void 0:b.getBuffAddNearRate().slice();if(Math.random()<z[n.length]){var v=Math.floor(Math.random()*i.length),C=i[v],m=C[0],B=C[1];t[r].push(i[v]),e[m][B]=r,this.addNearCell(t,e)}}},i.findNearPuzzle=function(t,e,r){for(var n=[[-1,0],[1,0],[0,1],[0,-1]],l=[],i=0;i<n.length;i++){var a=n[i],o=e+a[0],u=r+a[1];o>=0&&u>=0&&o<t.length&&u<t[o].length&&t[o][u]>-1&&t[o][u]!=1/0&&l.push([o,u])}if(l.length>0){var s=l[Math.floor(Math.random()*l.length)],f=s[0],h=s[1];return t[f][h]}return 0},i.onFitPuzzle=function(t,e){for(var r,n=parseInt(e),l=g.getBoard().map((function(t){return t.slice()})),i=0;i<t.length;i++){var a,o=t[i],u=o[0],s=o[1];if(-1!=l[u][s])return void(null==(a=this.puzzleCtrl)||a.onFitPuzzleCallback(!1));l[u][s]=n}g.setBoard(l),null==(r=this.puzzleCtrl)||r.onFitPuzzleCallback(!0),this.checkResult(l)},i.onRemovePuzzle=function(t,e){for(var r=parseInt(e),n=g.getBoard().map((function(t){return t.slice()})),l=0;l<t.length;l++){var i=t[l],a=i[0],o=i[1];if(n[a][o]!=r)return;n[a][o]=-1}g.setBoard(n)},i.onStartButtonClicked=function(){this.setMenuVisible(!1),this.restart()},i.checkResult=function(t){for(var e,r,n=0;n<t.length;n++)for(var l=0;l<t[n].length;l++)if(-1==t[n][l])return;this.setMenuVisible(!0),this.btnStart&&(this.btnStart.active=!1),this.titleLabel&&(this.titleLabel.string=""),this.stageLabel&&(this.stageLabel.string=""),null==(e=this.buffCtrl)||e.generateBuffList(),null==(r=this.buffCtrl)||r.showBuffBtn(),g.setStage(g.getStage()+1),g.setCannotRotateBuff(!1)},i.setMenuVisible=function(t){this.startMenu&&(this.startMenu.active=t)},e}(c)).prototype,"cellPrefab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(w.prototype,"puzzleCtrl",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(w.prototype,"buffCtrl",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(w.prototype,"startMenu",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(w.prototype,"btnStart",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(w.prototype,"titleLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(w.prototype,"stageLabel",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=w))||O));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameModel.ts",["cc"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy,n=t.Color}],execute:function(){e._RF.push({},"3ed4fPz+JtG/7O1tueJ7qje","GameModel",void 0);var u=t("CELL_WIDTH",60),f=(t("FIT_ALLOW",Math.floor(u/4)),t("BOARD_COLOR",new n(64,64,64)),t("OBSTACLE_COLOR",new n(0,0,0)),t("ADD_NEAR_RATE",[1,1,1,.7,.5,.3]),t("MAX_BOARD_LENGTH",10)),s=t("MIN_BOARD_LENGTH",3),o=t("CGameModel",function(){function t(){this.boardLength=s,this.stage=1,this.board=[],this.puzzles=[],this.puzzleSizeBuff=0,this.lessHueBuff=1,this.cannotRotateBuff=!1,this.obstacleBuff=0,this.onecellBuff=0}var e=t.prototype;return e.setBoardLength=function(t){t>f&&(t=f),this.boardLength=t},e.setStage=function(t){this.stage=t},e.setBoard=function(t){this.board=t.map((function(t){return t.slice()}))},e.setPuzzles=function(t){this.puzzles=t.map((function(t){return t.map((function(t){return t.slice()}))}))},e.setPuzzleSizeBuff=function(t){this.puzzleSizeBuff=t},e.setLessHueBuff=function(t){this.lessHueBuff=t},e.setCannotRotateBuff=function(t){this.cannotRotateBuff=t},e.setObstacleBuff=function(t){this.obstacleBuff=t},e.setOnecellBuff=function(t){this.onecellBuff=t},e.getBoardLength=function(){return this.boardLength},e.getStage=function(){return this.stage},e.getBoard=function(){return this.board},e.getPuzzles=function(){return this.puzzles},e.getPuzzleSizeBuff=function(){return this.puzzleSizeBuff},e.getLessHueBuff=function(){return this.lessHueBuff},e.getCannotRotateBuff=function(){return this.cannotRotateBuff},e.getObstacleBuff=function(){return this.obstacleBuff},e.getOnecellBuff=function(){return this.onecellBuff},t}());t("GameModel",new o);e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./BuffController.ts","./GameController.ts","./GameModel.ts","./PuzzleController.ts"],(function(){return{setters:[null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PuzzleController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameModel.ts"],(function(e){var t,n,o,i,r,l,a,s,u,h,g,f,c,z,P,p,d,M,v,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,a=e.Prefab,s=e.CCFloat,u=e.input,h=e.Input,g=e.Vec3,f=e.UITransform,c=e.Color,z=e.Node,P=e.instantiate,p=e.Sprite,d=e.Component},function(e){M=e.GameModel,v=e.CELL_WIDTH,y=e.FIT_ALLOW}],execute:function(){var C,b,T,m,S,_,x,I,L;r._RF.push({},"4b28053qTlNFqEjoH7O1aS0","PuzzleController",void 0);var E=l.ccclass,U=l.property,w=function(e){return e[e.MT_LEFT=0]="MT_LEFT",e[e.MT_MID=1]="MT_MID",e[e.MT_RIGHT=2]="MT_RIGHT",e}(w||{});e("PuzzleController",(C=E("PuzzleController"),b=U({type:a}),T=U({type:s,min:0,max:1,step:.01}),m=U({type:s,min:0,max:1,step:.01}),C((x=t((_=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,o(t,"cellPrefab",x,i(t)),o(t,"cellSaturation",I,i(t)),o(t,"cellLightness",L,i(t)),t.fitCells=[],t.fitPuzzlePos=[0,0],t.dragPuzzle=null,t.dragStartPos=new g,t.puzzleStartPos=new g,t}n(t,e);var r=t.prototype;return r.start=function(){u.on(h.EventType.MOUSE_MOVE,this.onMouseMove,this),u.on(h.EventType.MOUSE_UP,this.onMouseUp,this)},r.update=function(e){},r.initPuzzle=function(){var e=this;if(this.cellPrefab){var t=M.getBoard(),n=M.getPuzzles().map((function(e){return e.map((function(e){return e.slice()}))})),o=this.generateHueColors(n.length*M.getLessHueBuff());this.node.removeAllChildren();for(var i=function(){for(var i=new z(""+r),l=n[r][0],a=l[0],s=l[1],u=0;u<n[r].length;u++){var f=P(e.cellPrefab);if(f){i.addChild(f);var c=n[r][u],d=c[0],y=c[1];f.setPosition((d-a)*v,(y-s)*v,0);var C=f.getComponent(p);C&&(C.color=o[r]),f.on(h.EventType.MOUSE_DOWN,(function(t){e.onMouseDown(t,i)}),e),f.on(h.EventType.MOUSE_MOVE,e.onMouseMove,e),f.on(h.EventType.MOUSE_UP,e.onMouseUp,e)}}M.getCannotRotateBuff()||(i.eulerAngles=new g(i.eulerAngles.x,i.eulerAngles.y,i.eulerAngles.z+90*Math.floor(4*Math.random()))),i.setPosition(t.length*v*-1,0,0),e.node.addChild(i)},r=0;r<n.length;r++)i()}},r.onMouseDown=function(e,t){if(t.parent)if(t.setSiblingIndex(t.parent.children.length-1),this.getFitCell(t),this.fitCells.length==t.children.length&&this.node.emit("onRemovePuzzle",this.fitCells,t.name),M.getCannotRotateBuff()||e.getButton()!=w.MT_RIGHT)e.getButton()!=w.MT_LEFT||this.dragPuzzle||(this.puzzleStartPos.set(t.getPosition()),this.dragStartPos.set(e.getUILocation().x,e.getUILocation().y,0),this.dragPuzzle=t);else{var n=new g(e.getUILocation().x,e.getUILocation().y,0),o=t.parent.getComponent(f).convertToNodeSpaceAR(n),i=t.getPosition(),r=new g(o.x-i.x,o.y-i.y,0),l=[Math.cos(Math.PI/-2),Math.sin(Math.PI/-2)],a=l[0],s=l[1],u=r.x*a-r.y*s,h=r.x*s+r.y*a,c=o.x-u,z=o.y-h;t.setPosition(c,z,0),t.eulerAngles=new g(t.eulerAngles.x,t.eulerAngles.y,(t.eulerAngles.z-90)%360)}},r.onMouseMove=function(e){if(this.dragPuzzle){var t=e.getUILocation(),n=this.dragStartPos.x-t.x,o=this.dragStartPos.y-t.y;this.dragPuzzle.setPosition(this.puzzleStartPos.x-n,this.puzzleStartPos.y-o)}},r.onMouseUp=function(e){if(this.dragPuzzle){if(this.getFitCell(this.dragPuzzle),this.fitCells.length==this.dragPuzzle.children.length)return void this.node.emit("onFitPuzzle",this.fitCells,this.dragPuzzle.name);this.dragPuzzle=null}},r.getFitCell=function(e){var t=0,n=0;if(this.fitCells=[],e.parent)for(var o=M.getBoard(),i=0;i<e.children.length;i++){var r=e.children[i].getWorldPosition(),l=e.parent.getComponent(f).convertToNodeSpaceAR(r),a=[l.x,l.y],s=a[0],u=a[1];if(Math.abs(s)>v*(o.length-1)/2+y||Math.abs(u)>v*(o.length-1)/2+y)break;if(o.length%2==0){var h=[s+.5*v,u+.5*v];s=h[0],u=h[1]}if(Math.abs(s%v)>y&&Math.abs(s%v)<v-y)break;if(Math.abs(u%v)>y&&Math.abs(u%v)<v-y)break;if(0==t&&0==n){(t=(s%v+v)%v)>y&&(t-=v),(n=(u%v+v)%v)>y&&(n-=v);var g=e.getPosition();this.fitPuzzlePos=[g.x-t,g.y-n]}var c=[s-t,u-n];s=c[0],u=c[1],this.fitCells.push([Math.round(s/v+Math.floor((o.length-1)/2)),Math.round(u/v+Math.floor((o.length-1)/2))])}},r.onFitPuzzleCallback=function(e){this.dragPuzzle&&e&&(this.dragPuzzle.setPosition(this.fitPuzzlePos[0],this.fitPuzzlePos[1],0),this.fitPuzzlePos=[0,0]),this.dragPuzzle=null},r.hslToRgb=function(e,t,n){var o,i,r;if(0==t)o=i=r=n;else{var l=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:s},a=n<.5?n*(1+t):n+t-n*t,s=2*n-a;o=l(s,a,e+1/3),i=l(s,a,e),r=l(s,a,e-1/3)}return[255*o,255*i,255*r]},r.generateHueColors=function(e){for(var t=[],n=0;n<e;n++){var o=n/e,i=this.hslToRgb(o,this.cellSaturation,this.cellLightness),r=i[0],l=i[1],a=i[2];t.push(new c(r,l,a))}return t},t}(d)).prototype,"cellPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(_.prototype,"cellSaturation",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=t(_.prototype,"cellLightness",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=_))||S));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});