System.register("chunks:///_virtual/GameController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayerController.ts","./GameModel.ts"],(function(e){var t,r,n,i,a,l,o,s,u,p,c,h,b,f,y,d,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,o=e.Prefab,s=e.CCInteger,u=e.Node,p=e.Label,c=e.instantiate,h=e.Component},function(e){b=e.PlayerController},function(e){f=e.GameStateType,y=e.BlockType,d=e.BLOCK_SIZE,g=e.GameModel}],execute:function(){var C,v,L,S,m,T,M,_,E,B,G,I,N,w,O,R,z;a._RF.push({},"62de2XRgQhA7YozEfTH6KHN","GameController",void 0);var P=l.ccclass,x=l.property;e("GameController",(C=P("GameController"),v=x({type:o}),L=x({type:s}),S=x({type:u}),m=x({type:b}),T=x({type:p}),M=x({type:p}),_=x({type:p}),C((G=t((B=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,n(t,"boxPrefab",G,i(t)),n(t,"roadLength",I,i(t)),n(t,"startMenu",N,i(t)),n(t,"playerCtrl",w,i(t)),n(t,"stepsLabel",O,i(t)),n(t,"btnLabel",R,i(t)),n(t,"titleLabel",z,i(t)),t}r(t,e);var a=t.prototype;return a.start=function(){var e;this.changeCurState(f.GS_INIT),null==(e=this.playerCtrl)||e.node.on("JumpEnd",this.onJunpEnd,this)},a.update=function(e){},a.generateRoad=function(){this.node.removeAllChildren();var e=[];e.push(y.BT_STONE);for(var t=y.BT_STONE,r=1;r<this.roadLength;r++){var n=Math.floor(2*Math.random());t==y.BT_NONE?e.push(y.BT_STONE):e.push(n),t=n}e.push(y.BT_STONE);for(var i=0;i<e.length;i++){var a=this.spawnBlockByType(e[i]);a&&(this.node.addChild(a),a.setPosition(i*d,0,0))}g.setRoad(e)},a.spawnBlockByType=function(e){if(!this.boxPrefab)return null;var t=null;return e==y.BT_STONE&&(t=c(this.boxPrefab)),t},a.setMenuVisible=function(e){var t,r=this;this.startMenu&&(this.startMenu.active=e,1==e?null==(t=this.playerCtrl)||t.setInputActive(!1):setTimeout((function(){var e;null==(e=r.playerCtrl)||e.setInputActive(!0)}),.1))},a.changeCurState=function(e){var t;switch(e){case f.GS_INIT:this.setMenuVisible(!0),this.stepsLabel&&(this.stepsLabel.string="");break;case f.GS_GAME:this.setMenuVisible(!1),this.stepsLabel&&(this.stepsLabel.string="Score : 0"),this.generateRoad(),null==(t=this.playerCtrl)||t.reset();break;case f.GS_OVER:this.setMenuVisible(!0),this.btnLabel&&(this.btnLabel.string="Restart"),this.titleLabel&&(this.titleLabel.string="")}},a.onStartButtonClicked=function(){this.changeCurState(f.GS_GAME)},a.onJunpEnd=function(){var e=g.getRoad();if(g.getCurMoveIdx()>=this.roadLength&&(g.setCurMoveIdx(this.roadLength),this.changeCurState(f.GS_OVER)),e[g.getCurMoveIdx()]==y.BT_NONE)this.changeCurState(f.GS_OVER);else if(this.stepsLabel){var t;this.stepsLabel.string="Score : "+g.getCurMoveIdx(),null==(t=this.playerCtrl)||t.onJumpEndCallBack()}},t}(h)).prototype,"boxPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(B.prototype,"roadLength",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=t(B.prototype,"startMenu",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(B.prototype,"playerCtrl",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(B.prototype,"stepsLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(B.prototype,"btnLabel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(B.prototype,"titleLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=B))||E));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameModel.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"5ccf1h3p9FKArHtsWsX1Gwq","GameModel",void 0);e("BLOCK_SIZE",40),e("JUMP_TIME",.3),e("HOLD_TIME",.25),e("BlockType",function(e){return e[e.BT_NONE=0]="BT_NONE",e[e.BT_STONE=1]="BT_STONE",e}({})),e("GameStateType",function(e){return e[e.GS_INIT=0]="GS_INIT",e[e.GS_GAME=1]="GS_GAME",e[e.GS_OVER=2]="GS_OVER",e}({}));var n=e("CGameModel",function(){function e(){this.road=[],this.curMoveIdx=0}var t=e.prototype;return t.getRoad=function(){return this.road},t.setRoad=function(e){this.road=e.slice()},t.setCurMoveIdx=function(e){this.curMoveIdx=e},t.getCurMoveIdx=function(){return this.curMoveIdx},e}());e("GameModel",new n);t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameController.ts","./GameModel.ts","./PlayerController.ts"],(function(){return{setters:[null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameModel.ts"],(function(t){var e,o,i,s,n,u,r,l,a,p,h,c,m,d,T,y,M;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){n=t.cclegacy,u=t._decorator,r=t.Vec3,l=t.Animation,a=t.Sprite,p=t.input,h=t.Input,c=t.Component},function(t){m=t.JUMP_TIME,d=t.GameModel,T=t.BlockType,y=t.HOLD_TIME,M=t.BLOCK_SIZE}],execute:function(){var f,P,g,v,_,J,E;n._RF.push({},"5e8df7IuSpA1YdMjleg4jFF","PlayerController",void 0);var S=u.ccclass,I=u.property,H=new r(0,33,0),b=function(t){return t[t.MT_LEFT=0]="MT_LEFT",t[t.MT_MID=1]="MT_MID",t[t.MT_RIGHT=2]="MT_RIGHT",t}(b||{});t("PlayerController",(f=S("PlayerController"),P=I({type:l}),g=I({type:a}),f((J=e((_=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),u=0;u<o;u++)n[u]=arguments[u];return e=t.call.apply(t,[this].concat(n))||this,i(e,"bodyAnim",J,s(e)),i(e,"body",E,s(e)),e.startJump=!1,e.startFall=!1,e.curJumpTime=0,e.curJumpSpeed=0,e.curPos=new r,e.deltaPos=new r(0,0,0),e.targetPos=new r,e.longJumpOnce=!1,e.mouseHold=null,e.mouseHoldTime=0,e}o(e,t);var n=e.prototype;return n.start=function(){},n.update=function(t){if(1==this.startJump)if(this.curJumpTime+=t,this.curJumpTime>m){this.node.setPosition(this.targetPos);var e=d.getRoad();0==this.startFall&&e[d.getCurMoveIdx()]==T.BT_NONE?this.fall():this.node.emit("JumpEnd")}else 0==this.startFall&&(this.node.getPosition(this.curPos),this.deltaPos.x=this.curJumpSpeed*t,r.add(this.curPos,this.curPos,this.deltaPos),this.node.setPosition(this.curPos));0==this.longJumpOnce&&null!=this.mouseHold&&(this.mouseHoldTime+=t,this.mouseHoldTime>y&&(this.mouseHold==b.MT_LEFT?this.jumpByStep(2):this.jumpByStep(-2),this.mouseHoldTime=0,this.longJumpOnce=!0))},n.onMouseDown=function(t){var e=t.getButton();(e==b.MT_LEFT||e==b.MT_RIGHT&&d.getCurMoveIdx()>=2)&&(this.mouseHold=e)},n.onMouseUp=function(t){this.mouseHold=null,this.mouseHoldTime=0,1!=this.longJumpOnce?t.getButton()==b.MT_LEFT?this.jumpByStep(1):t.getButton()==b.MT_RIGHT&&d.getCurMoveIdx()>=1&&this.jumpByStep(-1):this.longJumpOnce=!1},n.onJumpEndCallBack=function(){this.startJump=!1,this.startFall=!1},n.fall=function(){var t;this.startFall=!0,this.curJumpTime=0;var e=this.bodyAnim.getState("fall");e.speed=e.duration/m,null==(t=this.bodyAnim)||t.play("fall")},n.jumpByStep=function(t){var e;if(1!=this.startJump&&1!=this.startFall){this.startJump=!0;var o=t*M;this.curJumpTime=0;var i=this.bodyAnim.getState("oneStep");i.speed=i.duration/m,this.curJumpSpeed=o/m,this.node.getPosition(this.curPos),r.add(this.targetPos,this.curPos,new r(o,0,0)),null==(e=this.bodyAnim)||e.play("oneStep"),d.setCurMoveIdx(d.getCurMoveIdx()+t)}},n.setInputActive=function(t){t?(p.on(h.EventType.MOUSE_UP,this.onMouseUp,this),p.on(h.EventType.MOUSE_DOWN,this.onMouseDown,this)):(p.off(h.EventType.MOUSE_UP,this.onMouseUp,this),p.off(h.EventType.MOUSE_DOWN,this.onMouseDown,this))},n.reset=function(){this.startJump=!1,this.startFall=!1,d.setCurMoveIdx(0),this.node.setPosition(r.ZERO),this.node.getPosition(this.curPos),this.body.node.setPosition(H),this.mouseHoldTime=0},e}(c)).prototype,"bodyAnim",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(_.prototype,"body",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=_))||v));n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});